{"version":3,"sources":["utils/axios.js","scripts/mobx/homeData.js","scripts/views/details/index.js"],"names":["token","axios","defaults","baseURL","headers","common","post","interceptors","request","use","config","msg","sessionStorage","loading","console","log","error","offline","Promise","reject","response","setTimeout","data","hide","success","code","history","push","fail","HomeData","observable","deep","action","then","res","userPhone","phone","home1List","length","home3List","home4List","home5List","zhibo1List","shangchengnav1","shangchengnav2","goodsList","result","iid","goodsDetails","key","searchList","searchFlag","Details","observer","props","showModal","e","preventDefault","setState","onClose","changeColor","i","changeNum","target","value","goodNum","numAdd","state","numDesc","payGoods","modal1","showToast","sentGoods","modal2","goodColor","goodSize","colorList","sizeList","location","pathname","split","this","GetGoodsDetails","info","count","img","title","price","className","src","alt","orgPrice","onClick","popup","visible","animationType","id","style","height","textAlign","display","justifyContent","margin","map","k","onChange","selected","colorFlag","background","marginTop","color","type","name","min","max","disabled","Component"],"mappings":"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","file":"static/js/16.16727230.chunk.js","sourcesContent":["\r\nimport axios from \"axios\";\r\nimport {Toast} from \"antd-mobile\"\r\nimport {history} from \"./history\";\r\n\r\nvar token = \"\";\r\n// axios.defaults.baseURL = \"http://localhost:2021/\"   // 基路径\r\naxios.defaults.baseURL = \"http://dengchuang.top:2021/\"   // 基路径\r\naxios.defaults.headers.common['token'] = token;     // token 为 空\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\n//封装对应的 成功 失败提示 在下面调用\r\nexport function loadingToast(msg) {\r\n    Toast.loading(msg, 3, () => {\r\n      console.log('Load complete !!!');\r\n    });\r\n}\r\nexport function successToast(msg) {\r\n    Toast.hide();\r\n    Toast.success(msg, 1);\r\n}\r\n\r\nexport function failToast(msg) {\r\n  Toast.hide();\r\n  Toast.fail(msg, 1);\r\n}\r\n\r\nexport function offline(msg) {\r\n  Toast.offline(msg, 1);\r\n}\r\n\r\n\r\n\r\n// axios 拦截器   Interceptors\r\n// 请求 request 拦截器   请求之前业务逻辑 配置 data /headers\r\naxios.interceptors.request.use(function (config) {\r\n  // 请求发送之前做的事情\r\n  \r\n  token = sessionStorage.token ?   sessionStorage.token : \"\";\r\n  config.headers['token']  = token;\r\n  loadingToast(\"努力加载...\");\r\n  return config;\r\n\r\n  \r\n}, function (error) {\r\n  // 请求发送 失败 \r\n  offline(\"请求失败---网络错误!\")\r\n  return Promise.reject(error);\r\n  \r\n});\r\n\r\n\r\n// 响应 response 拦截器   根据返回的状态码 做对应的业务逻辑 \r\naxios.interceptors.response.use(function (response) {\r\n    // 获取到响应数据做的事情\r\n    // console.log(response)\r\n    setTimeout(()=>{\r\n      successToast(response.data.msg);\r\n      \r\n    },1000);\r\n    if(response.data.code==\"400\"){\r\n      history.push(\"/login\");\r\n    };\r\n    \r\n    return response;\r\n\r\n  }, function (error) {\r\n    failToast(\"服务器error-响应失败!!!\");\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n\r\nexport {axios}\r\n\r\n","import {observable,action} from \"mobx\";\r\nimport {axios} from \"~/axios\"\r\nimport { history } from \"~/history.js\";\r\n\r\nclass HomeData{\r\n    @observable bannerList =[]  //banner 图数据\r\n    @observable.deep userPhone =\"\"  //banner 图数据\r\n    @observable.deep home1List =[]  //home1 数据\r\n    @observable.deep home3List =[]  //home3 数据\r\n    @observable.deep home4List =[]  //home4 数据\r\n    @observable.deep home5List =[]  //home5 数据\r\n    \r\n    @observable.deep userPhone =\"\"  //用户手机号\r\n\r\n    @observable.deep zhibo1List =[]  //直播1 数据\r\n    \r\n    @observable.deep shangchengnav1 =[]  //商城nav1 数据\r\n    @observable.deep shangchengnav2 =[]  //商城nav1 数据\r\n    @observable.deep goodsList =[]  //商城nav1 数据\r\n\r\n    @observable.deep goodsDetails =\"\"  //获取商品详情 数据\r\n\r\n    @observable.deep searchFlag=true;      //全选\r\n\r\n    @observable.deep searchList=[];      //查询的商品数据\r\n\r\n\r\n    //请求异步数据\r\n    @action getPhone =()=>{\r\n        axios.post(\"/react/homeGetPhone\").then(res=>{\r\n            this.userPhone =res.data.phone\r\n        })\r\n    }\r\n    \r\n    //请求异步数据\r\n    @action getHome1List =()=>{\r\n        if(this.home1List.length<=0){\r\n            axios.post(\"/react/home1Data\").then(res=>{\r\n                if(res.data.code==400){\r\n                    this.home1List=[] \r\n                }\r\n                if(res.data.code==200){\r\n                    this.home1List =res.data.home1List\r\n                }\r\n            })\r\n\r\n        }\r\n        console.log(this.home1List.length)\r\n    }\r\n\r\n    //请求异步数据\r\n    @action getHome3List =()=>{\r\n        if(this.home3List.length<=0){\r\n            axios.post(\"/react/home3Data\").then(res=>{\r\n                console.log(\"getHome3List\",res)\r\n                this.home3List =res.data.home3List\r\n            })\r\n        }\r\n    }\r\n\r\n    //请求异步数据\r\n    @action getHome4List =()=>{\r\n        if(this.home4List.length<=0){\r\n            axios.post(\"/react/home4Data\").then(res=>{\r\n                if(res.code==400){\r\n                    this.home4List=[]\r\n                }\r\n                console.log(res)\r\n                this.home4List =res.data.home4List\r\n            })\r\n\r\n        }\r\n    }\r\n    //请求异步数据\r\n    @action getHome5List =()=>{\r\n        if(this.home5List.length<=0){\r\n            axios.post(\"/react/home5Data\").then(res=>{\r\n                console.log(res)\r\n                this.home5List =res.data.home5List\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n\r\n    //请求异步 直播01 数据\r\n    @action getZhiBo1List =()=>{\r\n        if(this.zhibo1List.length<=0){\r\n            axios.post(\"/react/zhibo1\").then(res=>{\r\n                console.log(res)\r\n                this.zhibo1List =res.data.zhibo1List\r\n                console.log(res.data.zhibo1List)\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n\r\n    //请求异步 商城01 数据\r\n    @action getShangChengnav1 =()=>{\r\n        if(this.shangchengnav1.length<=0){\r\n            axios.post(\"/react/shangchengnav1\").then(res=>{\r\n                // console.log(res)\r\n                this.shangchengnav1 =res.data.shangchengnav1\r\n                // console.log(res.data.shangchengnav1)\r\n            })\r\n        }\r\n    }\r\n\r\n    //请求异步 商城02 数据\r\n    @action getShangChengnav2 =()=>{\r\n        if(this.shangchengnav2.length<=0){\r\n            axios.post(\"/react/shangchengnav2\").then(res=>{\r\n                // console.log(res)\r\n                this.shangchengnav2 =res.data.shangchengnav2\r\n                // console.log(res.data.shangchengnav2)\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    //请求异步 商城的商品  数据\r\n    @action getGoodsList =()=>{\r\n        if(this.goodsList.length<=0){\r\n            axios.post(\"/react/getGoods\").then(res=>{\r\n                if(res.code==400){\r\n                    this.goodsList=[]\r\n                }else{\r\n                    console.log(res)\r\n                    this.goodsList =res.data.result\r\n                    console.log(this.goodsList)\r\n                }\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n\r\n    //请求异步 商品详情  数据\r\n    @action GetGoodsDetails =(iid)=>{   \r\n        \r\n            axios.post(\"/react/getGoodsDetails\",iid).then(res=>{\r\n                    console.log(res)\r\n                    this.goodsDetails =res.data.result[0]\r\n                    console.log(this.goodsDetails)\r\n            })  \r\n       \r\n    }\r\n\r\n\r\n    //搜索接口\r\n    @action getSearch =(key)=>{   \r\n            axios.post(\"/react/search\",{key}).then(res=>{\r\n                    console.log(res.data.result)\r\n                    if(res.data.result.length>0){\r\n                        this.searchList =res.data.result\r\n                        this.searchFlag =false\r\n                    }\r\n            })  \r\n    }\r\n\r\n    //取消搜索切换\r\n    @action getCancel=()=>{\r\n        this.searchFlag =true\r\n    }\r\n\r\n\r\n    //获取用户手机号\r\n    @action getUserPhone=()=>{\r\n        if(!this.userPhone){\r\n            axios.post(\"/react/getUserPhone\").then(res=>{\r\n               this.userPhone =res.data.phone\r\n            })\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    \r\n}\r\n\r\nexport default new HomeData;","import React, { Component } from \"react\";\r\nimport \"./index.scss\"\r\nimport { history } from \"~/history.js\";\r\nimport HomeData from \"../../mobx/homeData\"\r\nimport { observer } from \"mobx-react\"\r\nimport { Modal, List, Button, WhiteSpace, WingBlank, Tag,Toast } from \"antd-mobile\"\r\nimport {axios} from \"~/axios\"\r\n\r\n@observer\r\nclass Details extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          modal2: false,\r\n          modal1: false,\r\n          goodColor:\"\",\r\n          goodSize:\"\",\r\n          iid:\"\",\r\n          goodNum:1,\r\n          colorList:[\r\n                \"粉色\",\r\n                \"炫彩\",\r\n                \"库兰\",\r\n                \"多金\",\r\n                \"酷黑\",\r\n                \"海天蓝\",\r\n          ],\r\n          sizeList:[\r\n                \"S\",\r\n                \"M\",\r\n                \"L\",\r\n                \"XL\",\r\n                \"XXL\"\r\n          ]\r\n          \r\n\r\n        };\r\n      }\r\n\r\n    componentDidMount() {\r\n        const iid = history.location.pathname.split(\"/details/\")[1]\r\n        this.setState({\r\n            iid\r\n        })\r\n        console.log(iid)\r\n        if(iid){\r\n            HomeData.GetGoodsDetails({ iid })\r\n        }\r\n        console.log(HomeData.goodsDetails)\r\n    };\r\n    showModal = key => (e) => {\r\n        e.preventDefault(); // 修复 Android 上点击穿透\r\n        this.setState({\r\n          [key]: true,\r\n        });\r\n      }\r\n    onClose = key => () => {\r\n        console.log(32)\r\n    this.setState({\r\n        [key]: false,\r\n    });\r\n    }\r\n\r\n    changeColor=(i)=>{\r\n        console.log(i)\r\n        \r\n    }\r\n\r\n    changeNum=(e)=>{\r\n        console.log(e.target.value)\r\n        this.setState({\r\n            goodNum:e.target.value\r\n        })\r\n    }\r\n\r\n    numAdd=()=>{\r\n        this.setState({\r\n            goodNum:++this.state.goodNum\r\n        })\r\n    }\r\n    \r\n    numDesc=()=>{\r\n        if(this.state.goodNum>1){\r\n            this.setState({\r\n                goodNum:--this.state.goodNum\r\n            })\r\n        }\r\n    }\r\n    //v添加购物车\r\n    payGoods=()=>{\r\n        console.log(30)\r\n        this.setState({\r\n            modal1:false\r\n        })\r\n        this.showToast()\r\n    }\r\n    \r\n    // 前往结算\r\n    sentGoods=()=>{\r\n        this.setState({\r\n            modal2:false\r\n        })\r\n        history.push(\"/car\")\r\n    };\r\n\r\n    showToast() {\r\n        Toast.info('添加购物车成功', 1);\r\n        axios.post(\"/react/addToShopCar\",{\r\n            iid:this.state.iid,\r\n            count:this.state.goodNum,\r\n            img:HomeData.goodsDetails.img,\r\n            title:HomeData.goodsDetails.title,\r\n            price:HomeData.goodsDetails.price,\r\n        }).then(res=>{\r\n            console.log(res)\r\n        })\r\n    }\r\n      \r\n\r\n    render() {\r\n        return (\r\n            <div className=\"details\">\r\n\r\n                <div className=\"goodsImg\">\r\n                    { HomeData.goodsDetails.img&&<img src={HomeData.goodsDetails.img} alt=\"\" /> }\r\n                    <div className=\"price\">\r\n                        {HomeData.goodsDetails.price&&<b>￥{HomeData.goodsDetails.price} </b>}\r\n                        <p>\r\n                            {HomeData.goodsDetails.orgPrice&&<span> {HomeData.goodsDetails.orgPrice} `` </span>}\r\n                            <em> 快抢价格 </em>\r\n                        </p>\r\n                        {HomeData.goodsDetails.props&&<div className=\"tab\">\r\n                            {HomeData.goodsDetails.props}\r\n                        </div>}\r\n                    </div>\r\n                </div>\r\n                {/* ---显示快枪 */}\r\n                <div className=\"buy\">\r\n                    <img src=\"https://s10.mogucdn.com/mlcdn/c45406/190911_3helgk2lj16fd6chj4k30h5jf84fa_228x64.png\" alt=\"\" />\r\n                    <h6> {HomeData.goodsDetails.title} </h6>\r\n                    <div className=\"where clear\">\r\n                        <span>免邮费</span>\r\n                        <em>广州广东</em>\r\n                    </div>\r\n                    <img src=\"https://s10.mogucdn.com/mlcdn/c45406/190911_2bei5geia424hj2a3352ide25hbd0_1500x152.png\" alt=\"\" className=\"time\" />\r\n                </div>\r\n\r\n                {/* 底部加入购物车 */}\r\n                <footer>\r\n                    <div className=\"f1\">\r\n                        <div className=\"f1_01\">\r\n                            <i className=\"iconfont icon-ziyuan\"></i>\r\n                            <h3>店铺</h3>\r\n                        </div>\r\n                        <div className=\"f1_01\">\r\n                            <i className=\"iconfont icon-xiaoxi1\"></i>\r\n                            <h3>客服</h3>\r\n                        </div>\r\n                        <div className=\"f1_01\">\r\n                            <i className=\"iconfont icon-buoumaotubiao45\"></i>\r\n                            <h3>收藏</h3>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"f2\">\r\n                        <Button className=\"fb\"  onClick={this.showModal('modal1')}>加入购物车</Button>\r\n                        <Button className=\"fb fb2\"  onClick={this.showModal('modal2')} >立即购买</Button>\r\n                    </div>\r\n                </footer>\r\n\r\n                {/* 点击购买弹窗 */}\r\n                <div className=\"tan\">\r\n                    <WingBlank>\r\n                        <WhiteSpace />\r\n                        <Modal\r\n                            popup\r\n                            visible={this.state.modal2}\r\n                            onClose={this.onClose('modal2')}\r\n                            animationType=\"slide-up\"\r\n                        >\r\n                            <div id=\"size\"  style={ {height:\"4.8rem\",textAlign:\"left\"} }>\r\n                                颜色\r\n                                <div style={ {display:\"flex\",justifyContent:\"space-around\",margin:\"0.3rem 0\"} }>\r\n                                    {this.state.colorList.map((k,i)=>{\r\n                                        return(\r\n                                        <Tag key={i} onChange={ ()=>{this.changeColor(i)}  } selected={this.state.colorFlag}  > {k} </Tag>\r\n                                        )\r\n                                    })}\r\n                                </div>\r\n                                尺码\r\n                                <div style={ {display:\"flex\",margin:\"0.3rem 0\"} }>\r\n                                    {this.state.sizeList.map((k,i)=>{\r\n                                        return(\r\n                                        <Tag key={i} onChange={ ()=>{this.changeColor(i)}  } selected={this.state.colorFlag}  > {k} </Tag>\r\n                                        )\r\n                                    })}\r\n                                </div>\r\n                                添加商品请点击加入购物车哦😊\r\n                                {/* <div>\r\n                                    <button onClick={ this.numDesc }  >-</button>\r\n                                    <input type=\"number\" name=\"points\" min=\"1\" max=\"100\" value={this.state.goodNum} onChange={ (e)=>{this.changeNum(e)} } disabled style={{textAlign:\"center\"}}    />\r\n                                    <button onClick={ this.numAdd}>+</button>\r\n                                </div> */}\r\n                                <Button style={{background:\"linear-gradient(90deg,#ff5777,#ff468f)\",marginTop:\"0.3rem\",color:\"#fff\"}} onClick={this.sentGoods} >确定</Button>\r\n                                \r\n\r\n                            </div>\r\n                        </Modal>\r\n                    </WingBlank>\r\n                    <WingBlank>\r\n                        <WhiteSpace />\r\n                        <Modal\r\n                            popup\r\n                            visible={this.state.modal1}\r\n                            onClose={this.onClose('modal1')}\r\n                            animationType=\"slide-up\"\r\n                        >\r\n                            <div id=\"size\"  style={ {height:\"5.3rem\",textAlign:\"left\"} }>\r\n                                颜色\r\n                                <div style={ {display:\"flex\",justifyContent:\"space-around\",margin:\"0.3rem 0\"} }>\r\n                                    {this.state.colorList.map((k,i)=>{\r\n                                        return(\r\n                                        <Tag key={i} onChange={ ()=>{this.changeColor(i)}  } selected={this.state.colorFlag}  > {k} </Tag>\r\n                                        )\r\n                                    })}\r\n                                </div>\r\n                                尺码\r\n                                <div style={ {display:\"flex\",margin:\"0.3rem 0\"} }>\r\n                                    {this.state.sizeList.map((k,i)=>{\r\n                                        return(\r\n                                        <Tag key={i} onChange={ ()=>{this.changeColor(i)}  } selected={this.state.colorFlag}  > {k} </Tag>\r\n                                        )\r\n                                    })}\r\n                                </div>\r\n                                数量\r\n                                <div>\r\n                                    <button onClick={ this.numDesc }  >-</button>\r\n                                    <input type=\"number\" name=\"points\" min=\"1\" max=\"100\" value={this.state.goodNum} onChange={ (e)=>{this.changeNum(e)} } disabled style={{textAlign:\"center\"}}    />\r\n                                    <button onClick={ this.numAdd}>+</button>\r\n                                </div>\r\n                                <Button style={{background:\"linear-gradient(90deg,#ff5777,#ff468f)\",marginTop:\"0.3rem\",color:\"#fff\"}} onClick={this.payGoods} >确定</Button>\r\n                                \r\n\r\n                            </div>\r\n                        </Modal>\r\n                    </WingBlank>\r\n                </div>\r\n\r\n\r\n                {/* --------- */}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Details"],"sourceRoot":""}